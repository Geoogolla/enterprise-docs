---
layout: post
title: Azure deployment with existing UMS | Report Server
description: This topics describes how to deploy the Report Server with existing UMS as Azure App Service in the Microsoft Azure using ARM template.
platform: report-platform
documentation: ug
---

# Deploy Report Server Azure App Service and Upgrade User Management Server Azure App Service

This section explains how to deploy the Report Server application into Azure cloud as App Service using ARM templates and upgrade User Management Server Azure App Service.

## Deploy Report Server Azure App Service by using ARM template

To create a Bold Reports On-Premise Azure Web App using the ARM template, follow these steps:

1. Log in to [Azure portal](https://portal.azure.com/).

2. Click **New** in the left menu.
![New in Azure portal](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/new-template.png)

3. Search `Template deployment` in the marketplace and select **Template deployment**.
![Search Template deployment option](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/search-template.png)

4. Click **Create**.
![Create Template deployment](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/create-template.png)

5. Now, select **Build your own template in the editor** in the Custom Deployment window.
![Build your own template in the editor option](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/build-your-own-template.png)

6. [Click here](https://raw.githubusercontent.com/syncfusion/enterpriseserver-reportazure/master/armtemplates/v{{site.releaseversion}}/RS-UMS-AppServiceTemplate.json) to download the ARM template file.

7. Copy all the contents in the template file and replace them in the Edit template window, and then click **Save**.
![Edit the template and replace the template](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/edit-template.png)

8. Fill the details as instructed in the following to complete the deployment steps.
    * **Subscription**: Choose the subscription that you have with Azure. Learn more about subscriptions from [here](https://blogs.msdn.microsoft.com/arunrakwal/2012/04/09/create-windows-azure-subscription/).

    * **Resource group**: This is a logical group in Azure to group your resources like web app, storage account, network etc. Learn more about resource groups from [here](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview#resource-groups).

    * **Location**: Choose the location to deploy the app. **East US** is our recommended location.

    * **Select App Service Need To Deploy**:

    > It is mandatory to have latest User Management Server to run latest Report Server.

    ![App Service Types](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/app-service-select.png)

9. Select `Report Server` and this option is preferred when User Management Server is already deployed or running on remote machine and this will deploy Report Server alone with the given App service name inside the resource group.

![App service for Report Server](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/app-service-report-server.png)

* **Storage Type**: Bold Reports On-Premise stores the resources either in file storage or in Blob storage. Choose a storage type to store files generated by the Report Server.

> While deploying Report Server along with the User Management Server with the Storage type `AzureBlobStorage` selected, both Report Server and User Management Server containers are created under given Blob Storage Name.

Report Server container name – `syncfusionrscontainer` and User Management Server container name - `syncfusionumscontainer`

* **Web App name**: This is the name of the Report Server that you want to have in the URL. As this is going to be the URL, it should be unique globally. Deployment process will be failed, if this is already present and you should start once again with another name.

> Report Server will be deployed under `GivenAppServiceName` and User Management Server will be deployed under `GivenAppServiceName-ums`.

* **Storage account name**: This is optional if you have chosen file storage in storage type and mandatory for Blob storage. This also must be unique as that of the Web App name. Learn more about storage accounts from [here](https://docs.microsoft.com/en-us/azure/storage/storage-introduction).

* **Storage account type**: This is optional, if you have chosen file storage in Storage type and mandatory for Blob storage. Learn more about storage account types from [here](https://docs.microsoft.com/en-us/azure/storage/storage-introduction#replication-for-durability-and-high-availability).

* Select the agreement check box and click **Purchase** to deploy the Bold Reports On-Premise Web App.
![Fill app service details](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/custom-template-details-form.png)

Now, Bold Reports On-Premise App Service(Web App) deployment get started.

The App Service plan for the Web App is created, which will be in `Basic – B1` by default. Learn more about App Service plans from [here](https://docs.microsoft.com/en-us/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview). Bold Reports On-Premise Web App does not support free or shared App Service plans.

Bold Reports On-Premise supports basic, standard, and premium App Service plans in the Azure. The minimum recommended App Service plan to run the application is the basic plan.

To get better performance, scale up the App Service plan from basic to standard or premium plans. Refer to the following documentation links to learn how to scale up and scale out the App Service plan.

Scale up: <https://docs.microsoft.com/en-us/azure/app-service-web/web-sites-scale>

Scale out: <https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/insights-how-to-scale>

> ARR affinity must be `ON` when Report Server run on multiple instances in Azure App service. While rendering the reports, all the data cached to the server initially, and the subsequent request will use that cached data, which is used to improve the performance in report rendering. So, it is very important to navigate all the requests from a single session into the same machine. If ARR affinity set to `ON`, then all the request from the single session will be sent to the same instance..

To `ON` ARR affinity in app Services, go to your Azure app services and click on the `General settings` tab from the `Configuration`.
![General-Settings](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/general-settings.png)

Click on `ON` option from the `ARR affinity` and save the settings.
![Arr-Affinity](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/arr-affinity-on.png)

> By default, it will be `ON`.

### Start Report Server Azure App Service

After deploying the Report Server Azure App Service, start the Report Server App Service. Follow these steps to start App Service:

1. Select App Services in **Microsoft Azure Services**.
2. Select Report Server Azure App Service.
3. In the **Overview** section, click **Start**.
![Stop Report Server Azure App Service](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/start-app-service.png)

## Upgrade User Management Server Azure App Service

Follow the given steps to upgrade the User Management Server App Service to the latest version:

1. Preparation for upgrade.
2. Stop User Management Server Azure App Service.
3. Upgrade User Management Server to the latest release version.
4. Start User Management Server Azure App Service.
5. Run the User Management Server and check the new features.

### Preparation for upgrade User Management Server

* To upgrade the User Management Server Azure App Service to latest version, access the [Azure portal](https://portal.azure.com) with Azure portal credentials and access rights to edit the User Management Server App Service.

### Stop User Management Server Azure App Service

Before starting the upgrade/update process, stop the User Management Server App Service. Follow these steps to stop the User Management Server App Service:

1. Log in to [Azure portal](https://portal.azure.com).
2. Select App Services in Microsoft Azure Services.
3. Select User Management Server Azure App Service.
4. In the **Overview** section, click **Stop**.
![Stop User Management Server Azure App Service](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/stop-app-service.png)

### Upgrade User Management Server to the latest release version

Follow the below steps to configure the existing Azure blob storage details to the latest User Management Server:

1. Log in to [Azure portal](https://portal.azure.com).
2. Select User Management Server App Services.
3. Choose **Deployment Center** in the left panel of the User Management Server App Service.
    ![App service deployment center](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/deployment-center.png)

4. Once the deployment center is clicked, click the **Disconnect**. Now the deployment panel will open.
    ![Choose deployment source](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/Disconnect.png)

5. Select the **External** in the source control tab and click **Continue**.
    ![Select external repository option](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/source-control.png)

6. Select the **App Service Kudu build server** and click  **Continue**.
    ![Build provider](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/build-provider.png)

7. Now, fill the below details in the **Configure** tab  and click  **Continue**.
    * Repository URL - <https://github.com/SyncfusionInstall/enterpriseserver-umsazure.git>
    * Branch - `v{{site.umsVersion}}`
    * Repository Type - Git

      ![Deployment option for external repository](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/repository-configure.png)

8. Next click on **Finish** option. The **Successfully set up deployment** notification will be shown in the notification blade.
    ![Finish deployment](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/finish-upgrade.png)

    ![Success notification of deployment option](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/setup-success.png)

9. Select the **Sync** button in the deployment center blade.
    ![Synchronization of external repository](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/synchronization-external-repository.png)

10. Synchronization request submitted notification is shown in the notification blade and synchronization progress is shown in the deployment options blade.
    ![Synchronization status details](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/synchronization-progess.png)

11. Please wait until synchronization is completed.

### Start User Management Server Azure App Service

After upgrading the Azure App Service, start the User Management Server App Service. Follow these steps to start App Service:

1. Select App Services in **Microsoft Azure Services**.
2. Select User Management Server Azure App Service.
3. In the **Overview** section, click **Start**.
![Stop User Management Server Azure App Service](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/start-app-service.png)

#### Restart WebJobs

After the Azure Blob storage details are configured in the User Management Server application, you should restart the WebJobs. Follow the given steps to restart the WebJobs:

1. Select **WebJobs** in the left panel of the latest User Management Server app service.
2. Select `UserManagementServerScheduler` WebJobs and click **Stop**.
![Stop Web job](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/stop-ums-web-job.png)

3. After the status for `UserManagementServerScheduler` WebJobs is changed to stop, click **Start**.
![Start Web job](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/start-ums-web-job.png)

### Run the User Management Server and check the new features

After the User Management Server upgrade process is completed, launch the User Management Server from the Azure app service details blade or enter the User Management Server URL in the browser.
![Launch User Management Server app service](/static/assets/on-premise/images/installation-and-deployment/upgrade/azure-app-service/launch-app-service.png)

## Configure new Report Server with Existing User Management Server

After the successful deployment of Report Server and upgrade of User Management Server Azure on app service,connect the Bold Reports On-Premise with the User Management Server. To connect, you must create a application on User Management Server. You can find the details on how to add application in User Management Server [here](/on-premise/user-management-server/manage-applications/#add-new-application).

After the successful creation of an application in User Management Server. Start the Report Server Azure app. Enter the User Management Server URL, Client Id, Client Secret of the Report Server Application that is created on User Management Server.

![Report Server startup page](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/report-server-startup.png)

Click on the `Proceed` button. Configure Report Server Startup. You can find the details on how to configure Report Server [here](/on-premise/application-startup/startup/#configure-report-server)

Choose option to startup with or without including the sample resources and click `Proceed` button.

![Include samples](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/include-sample-resource.png)

Select the administrator users of Report server and click `Proceed` button.

![Admin selection Report Server](/static/assets/on-premise/images/installation-and-deployment/azure-deployment/app-service-using-arm-template/admin-selection-report-server.png)

After successful configuration of Report Server, it will be redirected to login page.
